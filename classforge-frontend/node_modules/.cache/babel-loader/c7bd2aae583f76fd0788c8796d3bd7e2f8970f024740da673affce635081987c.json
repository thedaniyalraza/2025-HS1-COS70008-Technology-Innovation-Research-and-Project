{"ast":null,"code":"/**\n * Touch-to-move-forward controls for mobile.\n */\nmodule.exports = AFRAME.registerComponent('touch-controls', {\n  schema: {\n    enabled: {\n      default: true\n    },\n    reverseEnabled: {\n      default: true\n    }\n  },\n  init: function () {\n    this.dVelocity = new THREE.Vector3();\n    this.bindMethods();\n    this.direction = 0;\n  },\n  play: function () {\n    this.addEventListeners();\n  },\n  pause: function () {\n    this.removeEventListeners();\n    this.dVelocity.set(0, 0, 0);\n  },\n  remove: function () {\n    this.pause();\n  },\n  addEventListeners: function () {\n    const sceneEl = this.el.sceneEl;\n    const canvasEl = sceneEl.canvas;\n    if (!canvasEl) {\n      sceneEl.addEventListener('render-target-loaded', this.addEventListeners.bind(this));\n      return;\n    }\n    canvasEl.addEventListener('touchstart', this.onTouchStart, {\n      passive: true\n    });\n    canvasEl.addEventListener('touchend', this.onTouchEnd, {\n      passive: true\n    });\n    const vrModeUI = sceneEl.getAttribute('vr-mode-ui');\n    if (vrModeUI && vrModeUI.cardboardModeEnabled) {\n      sceneEl.addEventListener('enter-vr', this.onEnterVR);\n    }\n  },\n  removeEventListeners: function () {\n    const canvasEl = this.el.sceneEl && this.el.sceneEl.canvas;\n    if (!canvasEl) {\n      return;\n    }\n    canvasEl.removeEventListener('touchstart', this.onTouchStart);\n    canvasEl.removeEventListener('touchend', this.onTouchEnd);\n    this.el.sceneEl.removeEventListener('enter-vr', this.onEnterVR);\n  },\n  isVelocityActive: function () {\n    return this.data.enabled && !!this.direction;\n  },\n  getVelocityDelta: function () {\n    this.dVelocity.z = this.direction;\n    return this.dVelocity.clone();\n  },\n  bindMethods: function () {\n    this.onTouchStart = this.onTouchStart.bind(this);\n    this.onTouchEnd = this.onTouchEnd.bind(this);\n    this.onEnterVR = this.onEnterVR.bind(this);\n  },\n  onTouchStart: function (e) {\n    this.direction = -1;\n    if (this.data.reverseEnabled && e.touches && e.touches.length === 2) {\n      this.direction = 1;\n    }\n    e.preventDefault();\n  },\n  onTouchEnd: function (e) {\n    this.direction = 0;\n    e.preventDefault();\n  },\n  onEnterVR: function () {\n    // This is to make the Cardboard button on Chrome Android working\n    const xrSession = this.el.sceneEl.xrSession;\n    if (!xrSession) {\n      return;\n    }\n    xrSession.addEventListener('selectstart', this.onTouchStart);\n    xrSession.addEventListener('selectend', this.onTouchEnd);\n  }\n});","map":{"version":3,"names":["module","exports","AFRAME","registerComponent","schema","enabled","default","reverseEnabled","init","dVelocity","THREE","Vector3","bindMethods","direction","play","addEventListeners","pause","removeEventListeners","set","remove","sceneEl","el","canvasEl","canvas","addEventListener","bind","onTouchStart","passive","onTouchEnd","vrModeUI","getAttribute","cardboardModeEnabled","onEnterVR","removeEventListener","isVelocityActive","data","getVelocityDelta","z","clone","e","touches","length","preventDefault","xrSession"],"sources":["C:/Users/draza/classforge/classforge-frontend/node_modules/aframe-extras/src/controls/touch-controls.js"],"sourcesContent":["/**\n * Touch-to-move-forward controls for mobile.\n */\nmodule.exports = AFRAME.registerComponent('touch-controls', {\n  schema: {\n    enabled: { default: true },\n    reverseEnabled: { default: true }\n  },\n\n  init: function () {\n    this.dVelocity = new THREE.Vector3();\n    this.bindMethods();\n    this.direction = 0;\n  },\n\n  play: function () {\n    this.addEventListeners();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n    this.dVelocity.set(0, 0, 0);\n  },\n\n  remove: function () {\n    this.pause();\n  },\n\n  addEventListeners: function () {\n    const sceneEl = this.el.sceneEl;\n    const canvasEl = sceneEl.canvas;\n\n    if (!canvasEl) {\n      sceneEl.addEventListener('render-target-loaded', this.addEventListeners.bind(this));\n      return;\n    }\n\n    canvasEl.addEventListener('touchstart', this.onTouchStart, {passive: true});\n    canvasEl.addEventListener('touchend', this.onTouchEnd, {passive: true});\n    const vrModeUI = sceneEl.getAttribute('vr-mode-ui');\n    if (vrModeUI && vrModeUI.cardboardModeEnabled) {\n      sceneEl.addEventListener('enter-vr', this.onEnterVR);\n    }\n  },\n\n  removeEventListeners: function () {\n    const canvasEl = this.el.sceneEl && this.el.sceneEl.canvas;\n    if (!canvasEl) { return; }\n\n    canvasEl.removeEventListener('touchstart', this.onTouchStart);\n    canvasEl.removeEventListener('touchend', this.onTouchEnd);\n    this.el.sceneEl.removeEventListener('enter-vr', this.onEnterVR)\n  },\n\n  isVelocityActive: function () {\n    return this.data.enabled && !!this.direction;\n  },\n\n  getVelocityDelta: function () {\n    this.dVelocity.z = this.direction;\n    return this.dVelocity.clone();\n  },\n\n  bindMethods: function () {\n    this.onTouchStart = this.onTouchStart.bind(this);\n    this.onTouchEnd = this.onTouchEnd.bind(this);\n    this.onEnterVR = this.onEnterVR.bind(this);\n  },\n\n  onTouchStart: function (e) {\n    this.direction = -1;\n    if (this.data.reverseEnabled && e.touches && e.touches.length === 2) {\n      this.direction = 1;\n    }\n    e.preventDefault();\n  },\n\n  onTouchEnd: function (e) {\n    this.direction = 0;\n    e.preventDefault();\n  },\n\n  onEnterVR: function () {\n    // This is to make the Cardboard button on Chrome Android working\n    const xrSession = this.el.sceneEl.xrSession;\n    if (!xrSession) { return; }\n    xrSession.addEventListener('selectstart', this.onTouchStart);\n    xrSession.addEventListener('selectend', this.onTouchEnd);\n  }\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}